(()=>{let n="delivery",o=["name-surname","email","address","phone","article","thickness","color",n,"color-symbol","lacquer"];function t(e){e.target.classList.remove("required-field-error")}function r(){var e=u();return new FormData(e)}function c(e){let t={};return Array.from(e.entries()).forEach(function(e){t[e[0]]=e[1]}),t}function l(e){t=e;var t,e=o.filter(function(e){return""===t.get(e)||null===t.get(e)})||[];return e.forEach(function(e){e===n?document.querySelectorAll('[name="'+n+'"]').forEach(function(e){e.classList.add("required-field-error"),e.addEventListener("click",function(){document.querySelectorAll("[name=delivery]").forEach(function(e){e.classList.remove("required-field-error")})})}):document.querySelector("[name="+e+"]").classList.add("required-field-error")}),0===e.length}function y(e){document.getElementById(e).showModal()}function i(e){document.getElementById(e).close()}function e(e){e.preventDefault(),l(r())?window.print():y("invalid-form-warning")}function a(e){e.preventDefault();var n=r();if(l(n)){let e=c(n),t="?";for(entry in e)""!==e[entry]&&(t+=entry+"="+e[entry]+"&");window.location.href="mailto:marketing@kobax.pl?subject=zlecenie&body="+window.location.href+t}else y("invalid-form-warning")}function g(t){t.closest("tr").querySelectorAll('input[type="checkbox"]').forEach(function(e){e!==t&&(e.checked=!1)})}function d(){u().reset(),localStorage.removeItem("form"),i("reset-form-warning")}function u(){return document.querySelector("form")}function m(){var e=c(r()),t={};for(entry in e)""!==e[entry]&&(t[entry]=e[entry]);localStorage.setItem("form",JSON.stringify(t))}function s(){l(r())?(document.querySelectorAll(".form-button").forEach(function(e){e.classList.add("hidden")}),html2canvas(document.querySelector(".page-a4")).then(function(e){var e=e.toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="Formularz.png",t.click()}).then(function(){document.querySelectorAll(".form-button").forEach(function(e){e.classList.remove("hidden")})})):y("invalid-form-warning")}b("bottom-table-left",1,15,!1),b("bottom-table-right",16,5,!0);var f=new URLSearchParams(window.location.search);if(f.size){let n=u();f.forEach(function(e,t){t=n.querySelector("[name="+t+"]");t&&("checkbox"===t.type?t.checked=!0:t.value=e)}),n.classList.add("locked"),document.querySelectorAll(".text-warning")[1].innerHTML='<small class="visible-when-locked">! FORMULARZ ZABLOKOWANY DO EDYCJI !</small>',document.querySelectorAll(".pointer-events-none").forEach(function(e){e.classList.remove("pointer-events-none")})}var v=JSON.parse(localStorage.getItem("form"));if(v){var h=u();for(entry in v){var E=h.querySelector("[name="+entry+"]");E&&("checkbox"===E.type?E.checked=!0:E.value=v[entry])}}function b(e,t,n,o){var r=e,c=o,l=document.getElementById("bottom-table-header"),i=document.getElementById("bottom-tables-container");if((l=l.content.cloneNode(!0)).querySelector(".bottom-table").id=r,c){let e=l.getElementById("warning-text");e.innerHTML='<button class="form-button no-print reset-button">WYCZYÅšC FORMULARZ</button>',e.querySelector(".reset-button").addEventListener("click",function(e){e.preventDefault(),y("reset-form-warning")})}i.appendChild(l);var a=e,d=t,u=n,m=o,s=document.getElementById("bottom-table-row"),f=document.getElementById(a);for(let o=d;o<d+u;o++){let n=s.content.cloneNode(!0),e=(n.querySelector(".row-number-cell").textContent=o+".",["height","width","quantity","kind","display"].forEach(function(e){var t=n.querySelector("#"+e+"-column");t.id="row"+o+"-"+e,t.name="row"+o+"-"+e,t.setAttribute("aria-labelledby",e+"-label")}),n.querySelector("#vertical-column")),t=n.querySelector("#horizontal-column");e.id="row"+o+"-vertical",t.id="row"+o+"-horizontal",e.name="row"+o+"-direction",t.name="row"+o+"-direction",t.addEventListener("change",function(){g(t)}),e.addEventListener("change",function(){g(e)}),f.appendChild(n)}if(m){let e=document.getElementById("notes-textarea").content.cloneNode(!0);f.appendChild(e)}}o.forEach(function(e){document.querySelector("[name="+e+"]").addEventListener("click",t)}),document.getElementById("print-page").addEventListener("click",e),document.getElementById("capture").addEventListener("click",s),document.getElementById("send-order").addEventListener("click",a),document.querySelectorAll("dialog").forEach(function(e){e.addEventListener("click",function(){i(e.id)})}),u().addEventListener("change",m),document.getElementById("confirm-form-reset").addEventListener("click",d),document.body.style.zoom=localStorage.getItem("zoom")||"1",document.getElementById("zoom-in").addEventListener("click",function(){var e=(parseFloat(document.body.style.zoom)+.1).toString();localStorage.setItem("zoom",e),document.body.style.zoom=e}),document.getElementById("zoom-out").addEventListener("click",function(){var e=(parseFloat(document.body.style.zoom)-.1).toString();localStorage.setItem("zoom",e),document.body.style.zoom=e})})();